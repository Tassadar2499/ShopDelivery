@page "/login"

@using CouriersWebService.Data
@using System.Net.Http.Json;

@inject HttpClient httpClient
@inject NavigationManager navigationManager

<h3>Register</h3>

<EditForm Model="@AuthData" OnValidSubmit="@HandleLogin">
	<DataAnnotationsValidator />
	<ValidationSummary />

	<InputText id="login" @bind-Value="AuthData.Login" />
	<InputText type="password" placeholder="Password" @bind-Value="@AuthData.Password" />

	<button type="submit">Register</button>
</EditForm>

@code {
	private AuthData AuthData { get; set; }

	protected override void OnInitialized()
	{
		AuthData = new AuthData();
	}

	private async Task HandleLogin()
		 => await httpClient.PostAsJsonAsync($"{navigationManager.BaseUri}Auth/Login", AuthData).ConfigureAwait(false);
}